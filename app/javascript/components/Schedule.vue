<template>
<div>
  <div class="card schedule-card"
  :style="'background-color:'+schedule.color+';'"
  :class="classButton" 
  :id="'schedule-card-'+schedule.id"
  >
    

    <div class="body" style="display:flex; justify-content:center; padding-top:1px;font-size:20px;" @click="displayChange">
      <div class="schedule-title" style="margin-left:10px;margin-top:1px;">
        {{schedule.body}}
      </div>
    </div>
    <div class="card-handle-button"
    >
      <div @click="openScheduleSettingModal">
        <ScheduleSettingButton style="margin-left:1px;"></ScheduleSettingButton>
      </div>
      <div>
        <TrashCanOutline
        fillColor="red"
        :size="30"
        style="margin-left:10px;margin-bottom:40px;"
        @click="deleteSchedule"
        ></TrashCanOutline>
      </div>
    </div>
  </div>
</div>
</template>


<script>
import ScheduleSettingButton from '../components/ScheduleSettingButton'
import ScheduleDeleteButton from '../components/ScheduleDeleteButton'
import TrashCanOutline from 'vue-material-design-icons/TrashCanOutline.vue';

export default {
  name: 'Schedule',
  data(){
    return{
      displayNum: '',
      icon: 0,
      nonDisplay:false
    }
  },
  props: {
    schedule:{
      type: Object,
    }
  },
  components:{
    ScheduleSettingButton,
    ScheduleDeleteButton,
    TrashCanOutline,
  },
  methods: {
    deleteSchedule(e){
      if(confirm('本当にこのスケジュールカードを削除しますか？')) {
        this.$store.dispatch('schedules/deleteScheduleAction', this.schedule)
        this.$router.go({path: this.$router.currentRoute.path, force: true})
      }
    },
    displayChange(){
      this.nonDisplay = !this.nonDisplay;
      this.commitChange();
      this.$emit('commitChange')
    },
    commitChange(){
    },
    openScheduleSettingModal(schedule){
      this.$emit('clickScheduleSettingButton', this.schedule)
    },
  },
  computed:{
    classButton() {
      const classButton = ['tryButton']

      if (this.nonDisplay) {
        classButton.push('nonDisplay')
      }
      return classButton
    },
    displayNum(){
      return this.displayNum
    }
  }
}
</script>

<style scoped>
.nonDisplay{
  /* visibility:hidden */
  outline: dashed thin;
  background-color :white;
  color:white;
  opacity:0.3;
}

.card {
  height: 80px;
  width: 250px;
  cursor: pointer;
  display: flex;
}

.body {
  position: absolute;
  top: 20px;
  right: 10px;
  font-size: 18px;
  width: 90%;
  word-wrap: break-word;
  margin-bottom :3%;
}

.card-body-editing{
  display: flex;
}

.card-handle-button{
  position: absolute;
  top: 1px;
  right: 10px;
  cursor: pointer;
  border-radius: 8px;
  color: white;
  width: 10%;
}
</style>

